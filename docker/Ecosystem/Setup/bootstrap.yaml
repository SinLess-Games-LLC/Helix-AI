services:
  helix-bootstrap:
    build:
      context: .
      dockerfile: ./Dockerfile
    image: sinless777/helix-bootstrap
    container_name: bootstrap
    hostname: bootstrap
    privileged: true
    volumes:
      - certificates_data:/certs/
      - ./config.yaml:/config/config.yaml
      - ./scripts:/app/scripts/
      - consul_generated:/consul/generated
    command: "/app/scripts/run.sh"
    healthcheck:
      test: ['CMD', 'stat', '/certs/success']
      interval: 30s
      timeout: 10s
      retries: 5
